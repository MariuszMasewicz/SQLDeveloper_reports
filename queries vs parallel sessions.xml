<?xml version="1.0" encoding="UTF-8" ?>
<displays>
<folder>
	<name><![CDATA[ASH]]></name>
	<tooltip><![CDATA[]]></tooltip>
	<description><![CDATA[]]></description>
		<display id="489066f6-0193-1000-8001-0a7896e372e7" type="" style="Chart" enable="true">
		<name><![CDATA[queries vs parallel sessions]]></name>
		<description><![CDATA[]]></description>
		<tooltip><![CDATA[]]></tooltip>
		<drillclass><![CDATA[]]></drillclass>
		<CustomValues>
			<PLOT_HGRID_WIDTH><![CDATA[THINNER]]></PLOT_HGRID_WIDTH>
			<Y1AXIS_SCALE_INCREMENT><![CDATA[10.0]]></Y1AXIS_SCALE_INCREMENT>
			<Y2AXIS_SCALE_MAXIMUM><![CDATA[80.0]]></Y2AXIS_SCALE_MAXIMUM>
			<Y1AXIS_LINE_WIDTH><![CDATA[THINNEST]]></Y1AXIS_LINE_WIDTH>
			<Y1AXIS_TITLE_ALIGNMENT><![CDATA[CENTER]]></Y1AXIS_TITLE_ALIGNMENT>
			<LEGEND_LOCATION><![CDATA[AUTOMATIC]]></LEGEND_LOCATION>
			<LEGEND_ALIGNMENT><![CDATA[LEFT]]></LEGEND_ALIGNMENT>
			<XAXIS_LINE_WIDTH><![CDATA[THINNEST]]></XAXIS_LINE_WIDTH>
			<DATA_MAP_COLUMNS><![CDATA[\,"SAMPLE_TIME","SAMPLE_TIME","SAMPLE_TIME"]]></DATA_MAP_COLUMNS>
			<Y1AXIS_SCALE_MAXIMUM><![CDATA[80.0]]></Y1AXIS_SCALE_MAXIMUM>
			<XAXIS_TITLE_ALIGNMENT><![CDATA[CENTER]]></XAXIS_TITLE_ALIGNMENT>
			<XAXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></XAXIS_TICK_LABEL_ROTATE>
			<Y1AXIS_LOGARITHMIC_BASE><![CDATA[BASE_10]]></Y1AXIS_LOGARITHMIC_BASE>
			<TYPE><![CDATA[LINE_VERT_ABS]]></TYPE>
			<GRID_WIDTH><![CDATA[THINNER]]></GRID_WIDTH>
			<FOOTNOTE_ALIGNMENT><![CDATA[LEFT]]></FOOTNOTE_ALIGNMENT>
			<XAXIS_TICK_LABEL_SKIP_MODE><![CDATA[AUTOMATIC]]></XAXIS_TICK_LABEL_SKIP_MODE>
			<DATA_MAP_COLNAMES><![CDATA[\,"NUMBER_OF_QUERIES","NUMBER_OF_SESSIONS","PARALLEL_DEGREE","SAMPLE_TIME"]]></DATA_MAP_COLNAMES>
			<DATA_MAP_SERIES><![CDATA[\,queries,sessions,parallel_degree]]></DATA_MAP_SERIES>
			<Y2AXIS_LOGARITHMIC_BASE><![CDATA[BASE_10]]></Y2AXIS_LOGARITHMIC_BASE>
			<DATA_MAP_COUNT><![CDATA[3]]></DATA_MAP_COUNT>
			<STYLE><![CDATA[Default]]></STYLE>
			<TITLE_ALIGNMENT><![CDATA[LEFT]]></TITLE_ALIGNMENT>
			<Y2AXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></Y2AXIS_TICK_LABEL_ROTATE>
			<Y2AXIS_SCALE_MINIMUM><![CDATA[10.0]]></Y2AXIS_SCALE_MINIMUM>
			<Y2AXIS_LINE_WIDTH><![CDATA[THINNEST]]></Y2AXIS_LINE_WIDTH>
			<DATA_MAP_VALUES><![CDATA[\,"NUMBER_OF_QUERIES","NUMBER_OF_SESSIONS","PARALLEL_DEGREE"]]></DATA_MAP_VALUES>
			<Y1AXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></Y1AXIS_TICK_LABEL_ROTATE>
			<Y2AXIS_SCALE_INCREMENT><![CDATA[20.0]]></Y2AXIS_SCALE_INCREMENT>
			<PLOT_VGRID_WIDTH><![CDATA[THINNER]]></PLOT_VGRID_WIDTH>
			<Y2AXIS_TITLE_ALIGNMENT><![CDATA[CENTER]]></Y2AXIS_TITLE_ALIGNMENT>
			<SUBTITLE_ALIGNMENT><![CDATA[LEFT]]></SUBTITLE_ALIGNMENT>
		</CustomValues>
		<query>
			<sql><![CDATA[select sample_time, count(distinct ah.sql_id) as number_of_queries, count(*) as number_of_sessions, count(*)/count(distinct ah.sql_id) as parallel_degree
from DBA_HIST_ACTIVE_SESS_HISTORY ah  
where 1=1
and ah.sql_id like nvl(:sql_id , '%')
and sample_time between to_timestamp(:start_timestamp, 'YYYY-MM-DD HH24:mi') and to_timestamp(:end_timestamp, 'YYYY-MM-DD HH24:mi')
group by sample_time
order by ah.sample_time]]></sql>
			<binds>
				<bind id="sql_id">
					<prompt><![CDATA[sql_id]]></prompt>
					<tooltip><![CDATA[sql_id]]></tooltip>
					<value><![CDATA[NULL_VALUE]]></value>
					<bracket><![CDATA[null]]></bracket>
				</bind>
				<bind id="start_timestamp">
					<prompt><![CDATA[start_timestamp]]></prompt>
					<tooltip><![CDATA[start_timestamp]]></tooltip>
					<value><![CDATA[2024-12-09 02:00]]></value>
					<bracket><![CDATA[null]]></bracket>
				</bind>
				<bind id="end_timestamp">
					<prompt><![CDATA[end_timestamp]]></prompt>
					<tooltip><![CDATA[end_timestamp]]></tooltip>
					<value><![CDATA[2024-12-09 05:00]]></value>
					<bracket><![CDATA[null]]></bracket>
				</bind>
			</binds>
		</query>
		<display id="null" type="" style="Table" enable="true">
			<name><![CDATA[queries]]></name>
			<description><![CDATA[]]></description>
			<tooltip><![CDATA[]]></tooltip>
			<drillclass><![CDATA[]]></drillclass>
			<CustomValues>
				<TYPE><![CDATA[horizontal]]></TYPE>
			</CustomValues>
			<query>
				<sql><![CDATA[select sample_time,ah.sql_id, count(*) number_of_sessions, dbms_lob.substr(sql_text,100)
from DBA_HIST_ACTIVE_SESS_HISTORY ah  left join dba_hist_sqltext st on ah.sql_id=st.sql_id
where 1=1
and ah.sql_id like nvl(:sql_id , '%')
and sample_time =:SAMPLE_TIME
group by sample_time,ah.sql_id,  dbms_lob.substr(sql_text,100)
order by sample_time,number_of_sessions desc, ah.sql_id]]></sql>
				<binds>
					<bind id="sql_id">
						<prompt><![CDATA[sql_id]]></prompt>
						<tooltip><![CDATA[sql_id]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
					<bind id="SAMPLE_TIME">
						<prompt><![CDATA[SAMPLE_TIME]]></prompt>
						<tooltip><![CDATA[SAMPLE_TIME]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
				</binds>
			</query>
		</display>
		<display id="null" type="" style="Table" enable="true">
			<name><![CDATA[events]]></name>
			<description><![CDATA[]]></description>
			<tooltip><![CDATA[]]></tooltip>
			<drillclass><![CDATA[]]></drillclass>
			<CustomValues>
				<TYPE><![CDATA[horizontal]]></TYPE>
			</CustomValues>
			<query>
				<sql><![CDATA[SELECT NVL(a.event, 'ON CPU') AS event,
       COUNT(*)*10 AS total_wait_time
FROM   dba_hist_active_sess_history a
WHERE  a.sample_time = :SAMPLE_TIME 
and a.sql_id like nvl(:sql_id , '%')
GROUP BY a.event
ORDER BY total_wait_time DESC]]></sql>
				<binds>
					<bind id="SAMPLE_TIME">
						<prompt><![CDATA[SAMPLE_TIME]]></prompt>
						<tooltip><![CDATA[SAMPLE_TIME]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
					<bind id="sql_id">
						<prompt><![CDATA[sql_id]]></prompt>
						<tooltip><![CDATA[sql_id]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
				</binds>
			</query>
		</display>
		<display id="null" type="" style="Table" enable="true">
			<name><![CDATA[events_whole_period]]></name>
			<description><![CDATA[]]></description>
			<tooltip><![CDATA[]]></tooltip>
			<drillclass><![CDATA[]]></drillclass>
			<CustomValues>
				<TYPE><![CDATA[horizontal]]></TYPE>
			</CustomValues>
			<query>
				<sql><![CDATA[SELECT :start_timestamp start_timestamp, :end_timestamp end_timestamp, NVL(a.event, 'ON CPU') AS event,
       COUNT(*)*10 AS total_wait_time
FROM   dba_hist_active_sess_history a
WHERE  sample_time between to_timestamp(:start_timestamp, 'YYYY-MM-DD HH24:mi') and to_timestamp(:end_timestamp, 'YYYY-MM-DD HH24:mi')
and a.sql_id like nvl(:sql_id , '%')
GROUP BY a.event
ORDER BY total_wait_time DESC]]></sql>
				<binds>
					<bind id="start_timestamp">
						<prompt><![CDATA[start_timestamp]]></prompt>
						<tooltip><![CDATA[start_timestamp]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
					<bind id="end_timestamp">
						<prompt><![CDATA[end_timestamp]]></prompt>
						<tooltip><![CDATA[end_timestamp]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
					<bind id="sql_id">
						<prompt><![CDATA[sql_id]]></prompt>
						<tooltip><![CDATA[sql_id]]></tooltip>
						<value><![CDATA[NULL_VALUE]]></value>
						<bracket><![CDATA[null]]></bracket>
					</bind>
				</binds>
			</query>
		</display>
	</display>
</folder>
</displays>